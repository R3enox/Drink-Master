import{d as y,u as b,c as S,r as h,f as v,j as e,s as j,b as w,a as k,h as N}from"./index-550ab56e.js";import{P as C}from"./PageTitle-1eecbee3.js";import{c as F,a as O,S as D}from"./createCollectionOptions-bf2941d1.js";import{s as I,b as T,a as E,D as L}from"./drinksSelector-2e854bdc.js";import{u as A,P as M,D as R}from"./DrinkImageComponent-63f87e10.js";import{D as _}from"./paginationLimits-a54512ff.js";import{s as U}from"./scrollToTop-9bd6e429.js";import"./emotion-memoize.esm-f5713a00.js";import"./floating-ui.dom-93188c57.js";const P=()=>{const[r,m]=y(),n=r.get("search")??"",t=r.get("category")??"",i=r.get("ingredient")??"";return{search:n,category:t,ingredient:i,setDrinkFilter:(a,o)=>{o===""?r.delete(a):r.set(a,o),r.set("page",1),m(r)},resetDrinkFilters:()=>{m({search:"",category:"",ingredient:""})}}},$=()=>{const{t:r,i18n:m}=b(),{categories:n,ingredients:t}=S(),{search:i,category:c,ingredient:l,setDrinkFilter:a}=P(),o=h.useMemo(()=>F(n??[]),[n]),x=h.useMemo(()=>O(t??[]),[t]),{handleSubmit:u,setValue:p,watch:d}=v({defaultValues:{search:i||""}}),f=s=>{a("search",s.search)};return e.jsxs("div",{className:"flex flex-col items-center md:flex-row gap-[14px] md:gap-[8px] mt-[40px] md:mt-[60px] lg:mt-[80px]",children:[e.jsxs("form",{onSubmit:u(f),className:"flex flex-row w-full justify-between items-center md:w-[264px] border-border-color-search dark:border-border-color hover:border-hover-border-color-search dark:hover:border-grey-text-color hover:color-transparent bg-transparent h-[54px] rounded-[200px] border-[1px] py-[18px] md:py-[14px] px-[24px]",children:[e.jsx("input",{className:"bg-transparent w-full outline-none text-[14px] md:text-[17px] leading-[1.29] md:leading-[1.56]  placeholder:text-dark-theme-bg-color dark:placeholder:text-primary-text-color",type:"text",placeholder:r("inputPlaceholder.DrinksSearch.text"),onChange:s=>{p("search",s.target.value)},value:d("search")}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"reset",onClick:()=>{p("search",""),a("search","")},className:"w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:d("search")&&e.jsx("svg",{className:"stroke-primary-text-button-color fill-none dark:stroke-primary-text-color w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:e.jsx("use",{href:j+"#icon-cross"})})}),e.jsx("button",{type:"submit",children:e.jsx("svg",{className:"stroke-primary-text-button-color fill-none dark:stroke-primary-text-color ml-[10px] sm:w-[22px] h-[22px] md:w-[28px] md:h-[28px]",children:e.jsx("use",{href:j+"#icon-search"})})})]})]}),e.jsx(D,{options:o,placeholder:r("inputPlaceholder.DrinksSearch.SelectCategory"),classNamePrefix:"searchSelect",isClearable:c&&!0,onChange:s=>a("category",(s==null?void 0:s.value)||""),defaultValue:{value:c||"",label:c||r("inputPlaceholder.DrinksSearch.SelectCategory")}}),e.jsx(D,{options:x,placeholder:r("inputPlaceholder.DrinksSearch.SelectIngredients"),classNamePrefix:"searchSelect",isClearable:l&&!0,onChange:s=>a("ingredient",(s==null?void 0:s.value)||""),defaultValue:{value:l||"",label:l||r("inputPlaceholder.DrinksSearch.SelectIngredients")}})]})},q=()=>{const{t:r,i18n:m}=b(),n=w(),{page:t,per_page:i,countPagesOfPagination:c,setPage:l}=A(_),{search:a,category:o,ingredient:x}=P(),u=k(I),p=k(T),d=k(E);h.useEffect(()=>{let s=t;(isNaN(parseInt(t))||t<=0)&&(s=1);const g=new URLSearchParams({page:s,per_page:i});a&&g.set("search",a),o&&g.set("category",o),x&&g.set("ingredient",x),n(N(g))},[t,i,a,o,x,n]);const f=!d&&p===0;return e.jsxs("div",{className:"mt-[40px]",children:[p>0&&e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex flex-wrap flex-col md:flex-row gap-[28px] md:gap-x-[20px] md:gap-y-[40px] lg:gap-y-[80px]",children:u.map(s=>e.jsx(L,{drink:s},s._id))}),e.jsx(M,{totalCount:p,itemsPerPage:i,setPage:l,forcePage:t,initialPage:t,countPagesOfPagination:c})]}),f&&e.jsx(R,{description:r("DrinkImageComponent.Drinks")}),e.jsx("br",{})]})},Y=()=>{const{t:r,i18n:m}=b();return h.useEffect(()=>{U()},[]),e.jsx("div",{className:` dark:bg-common-set
    md:dark:bg-common-set-tablet lg:dark:bg-common-set-desktop bg-contain bg-no-repeat`,children:e.jsxs("div",{className:"container mx-auto pb-[80px]",children:[e.jsx(C,{title:r("title.Drinks")}),e.jsx($,{}),e.jsx(q,{})]})})};export{Y as default};
