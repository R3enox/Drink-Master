import{d as P,u as k,c as y,r as g,e as S,j as e,s as b,b as v,a as f,f as w}from"./index-c39f448a.js";import{P as N}from"./PageTitle-28781a95.js";import{c as C,a as F,S as j}from"./createCollectionOptions-53828c17.js";import{s as O,b as I,a as T,D as E}from"./drinksSelector-e749cecd.js";import{u as L,P as A,D as M}from"./DrinkImageComponent-ffc70a8c.js";import{D as R}from"./paginationLimits-a54512ff.js";import{s as _}from"./scrollToTop-9bd6e429.js";import"./floating-ui.dom-97632d49.js";const D=()=>{const[r,a]=P(),t=r.get("search")??"",c=r.get("category")??"",l=r.get("ingredient")??"";return{search:t,category:c,ingredient:l,setDrinkFilter:(n,i)=>{i===""?r.delete(n):r.set(n,i),r.set("page",1),a(r)},resetDrinkFilters:()=>{a({search:"",category:"",ingredient:""})}}},U=()=>{const{t:r}=k(),{categories:a,ingredients:t}=y(),{search:c,category:l,ingredient:p,setDrinkFilter:o}=D(),n=g.useMemo(()=>C(a??[],r,"categories"),[a,r]),i=g.useMemo(()=>F(t??[],r,"ingredients"),[t,r]),{handleSubmit:h,setValue:m,watch:d}=S({defaultValues:{search:c||""}}),u=s=>{o("search",s.search)};return e.jsxs("div",{className:"flex flex-col items-center md:flex-row gap-[14px] md:gap-[8px] mt-[40px] md:mt-[60px] lg:mt-[80px]",children:[e.jsxs("form",{onSubmit:h(u),className:"flex flex-row w-full justify-between items-center md:w-[264px] border-border-color-search dark:border-border-color hover:border-hover-border-color-search dark:hover:border-grey-text-color hover:color-transparent bg-transparent h-[54px] rounded-[200px] border-[1px] py-[18px] md:py-[14px] px-[24px]",children:[e.jsx("input",{className:"bg-transparent w-full outline-none text-[14px] md:text-[17px] leading-[1.29] md:leading-[1.56]  placeholder:text-dark-theme-bg-color dark:placeholder:text-primary-text-color",type:"text",placeholder:r("inputPlaceholder.DrinksSearch.text"),onChange:s=>{m("search",s.target.value)},value:d("search")}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"reset",onClick:()=>{m("search",""),o("search","")},className:"w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:d("search")&&e.jsx("svg",{className:"stroke-primary-text-button-color fill-none dark:stroke-primary-text-color w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:e.jsx("use",{href:b+"#icon-cross"})})}),e.jsx("button",{type:"submit",children:e.jsx("svg",{className:"stroke-primary-text-button-color fill-none dark:stroke-primary-text-color ml-[10px] sm:w-[22px] h-[22px] md:w-[28px] md:h-[28px]",children:e.jsx("use",{href:b+"#icon-search"})})})]})]}),e.jsx(j,{options:n,placeholder:r("inputPlaceholder.DrinksSearch.SelectCategory"),classNamePrefix:"searchSelect",isClearable:l&&!0,onChange:s=>o("category",(s==null?void 0:s.value)||""),defaultValue:{value:l||"",label:l||r("inputPlaceholder.DrinksSearch.SelectCategory")}}),e.jsx(j,{options:i,placeholder:r("inputPlaceholder.DrinksSearch.SelectIngredients"),classNamePrefix:"searchSelect",isClearable:p&&!0,onChange:s=>o("ingredient",(s==null?void 0:s.value)||""),defaultValue:{value:p||"",label:p||r("inputPlaceholder.DrinksSearch.SelectIngredients")}})]})},$=()=>{const{t:r}=k(),a=v(),{page:t,per_page:c,countPagesOfPagination:l,setPage:p}=L(R),{search:o,category:n,ingredient:i}=D(),h=f(O),m=f(I),d=f(T);g.useEffect(()=>{let s=t;(isNaN(parseInt(t))||t<=0)&&(s=1);const x=new URLSearchParams({page:s,per_page:c});o&&x.set("search",o),n&&x.set("category",n),i&&x.set("ingredient",i),a(w(x))},[t,c,o,n,i,a]);const u=!d&&m===0;return e.jsxs("div",{className:"mt-[40px]",children:[m>0&&e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex flex-wrap flex-col md:flex-row gap-[28px] md:gap-x-[20px] md:gap-y-[40px] lg:gap-y-[80px]",children:h.map(s=>e.jsx(E,{drink:s},s._id))}),e.jsx(A,{totalCount:m,itemsPerPage:c,setPage:p,forcePage:t,initialPage:t,countPagesOfPagination:l})]}),u&&e.jsx(M,{description:r("DrinkImageComponent.Drinks")}),e.jsx("br",{})]})},W=()=>{const{t:r,i18n:a}=k();return g.useEffect(()=>{_()},[]),e.jsx("div",{className:` dark:bg-common-set
    md:dark:bg-common-set-tablet lg:dark:bg-common-set-desktop bg-contain bg-no-repeat`,children:e.jsxs("div",{className:"container mx-auto pb-[80px]",children:[e.jsx(N,{title:r("title.Drinks")}),e.jsx(U,{}),e.jsx($,{})]})})};export{W as default};
