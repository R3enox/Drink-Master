import{d as P,u as k,c as y,r as h,f as S,j as e,s as b,b as v,a as f,h as w}from"./index-f884ad50.js";import{P as N}from"./PageTitle-d3ab14d2.js";import{c as C,a as F,S as j}from"./createCollectionOptions-4f4e5692.js";import{s as O,b as I,a as T,D as E}from"./drinksSelector-137c042b.js";import{u as L,P as A,D as M}from"./DrinkImageComponent-0fe8d7a6.js";import{D as R}from"./paginationLimits-a54512ff.js";import{s as _}from"./scrollToTop-9bd6e429.js";import"./emotion-memoize.esm-f5713a00.js";import"./floating-ui.dom-93188c57.js";const D=()=>{const[s,m]=P(),n=s.get("search")??"",a=s.get("category")??"",i=s.get("ingredient")??"";return{search:n,category:a,ingredient:i,setDrinkFilter:(t,o)=>{o===""?s.delete(t):s.set(t,o),s.set("page",1),m(s)},resetDrinkFilters:()=>{m({search:"",category:"",ingredient:""})}}},U=()=>{const{t:s,i18n:m}=k(),{categories:n,ingredients:a}=y(),{search:i,category:c,ingredient:l,setDrinkFilter:t}=D(),o=h.useMemo(()=>C(n??[]),[n]),x=h.useMemo(()=>F(a??[]),[a]),{handleSubmit:g,setValue:p,watch:d}=S({defaultValues:{search:i||""}}),u=r=>{t("search",r.search)};return e.jsxs("div",{className:"flex flex-col items-center md:flex-row gap-[14px] md:gap-[8px] mt-[40px] md:mt-[60px] lg:mt-[80px]",children:[e.jsxs("form",{onSubmit:g(u),className:"flex flex-row w-full justify-between items-center md:w-[264px] border-border-color-search dark:border-border-color hover:border-hover-border-color-search dark:hover:border-grey-text-color hover:color-transparent bg-transparent h-[54px] rounded-[200px] border-[1px] py-[18px] md:py-[14px] px-[24px]",children:[e.jsx("input",{className:"bg-transparent w-full outline-none text-[14px] md:text-[17px] leading-[1.29] md:leading-[1.56]  placeholder:text-dark-theme-bg-color dark:placeholder:text-primary-text-color",type:"text",placeholder:s("inputPlaceholder.DrinksSearch.text"),onChange:r=>{p("search",r.target.value)},value:d("search")}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"reset",onClick:()=>{p("search",""),t("search","")},className:"w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:d("search")&&e.jsx("svg",{className:"stroke-primary-text-button-color fill-none dark:stroke-primary-text-color w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:e.jsx("use",{href:b+"#icon-cross"})})}),e.jsx("button",{type:"submit",children:e.jsx("svg",{className:"stroke-primary-text-button-color fill-none dark:stroke-primary-text-color ml-[10px] sm:w-[22px] h-[22px] md:w-[28px] md:h-[28px]",children:e.jsx("use",{href:b+"#icon-search"})})})]})]}),e.jsx(j,{options:o,placeholder:s("inputPlaceholder.DrinksSearch.SelectCategory"),classNamePrefix:"searchSelect",isClearable:c&&!0,onChange:r=>t("category",(r==null?void 0:r.value)||""),defaultValue:{value:c||"",label:c||s("inputPlaceholder.DrinksSearch.SelectCategory")}}),e.jsx(j,{options:x,placeholder:s("inputPlaceholder.DrinksSearch.SelectIngredients"),classNamePrefix:"searchSelect",isClearable:l&&!0,onChange:r=>t("ingredient",(r==null?void 0:r.value)||""),defaultValue:{value:l||"",label:l||s("inputPlaceholder.DrinksSearch.SelectIngredients")}})]})},$=()=>{const{t:s,i18n:m}=k(),n=v(),{page:a,per_page:i,countPagesOfPagination:c,setPage:l}=L(R),{search:t,category:o,ingredient:x}=D(),g=f(O),p=f(I),d=f(T);h.useEffect(()=>{const r=new URLSearchParams({page:a,per_page:i});t&&r.set("search",t),o&&r.set("category",o),x&&r.set("ingredient",x),n(w(r))},[a,i,t,o,x,n]);const u=!d&&p===0;return e.jsxs("div",{className:"mt-[40px]",children:[p>0&&e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex flex-wrap flex-col md:flex-row gap-[28px] md:gap-x-[20px] md:gap-y-[40px] lg:gap-y-[80px]",children:g.map(r=>e.jsx(E,{drink:r},r._id))}),e.jsx(A,{totalCount:p,itemsPerPage:i,setPage:l,forcePage:a,initialPage:a,countPagesOfPagination:c})]}),u&&e.jsx(M,{description:s("DrinkImageComponent.Drinks")}),e.jsx("br",{})]})},X=()=>{const{t:s,i18n:m}=k();return h.useEffect(()=>{_()},[]),e.jsx("div",{className:` dark:bg-common-set
    md:dark:bg-common-set-tablet lg:dark:bg-common-set-desktop bg-contain bg-no-repeat`,children:e.jsxs("div",{className:"container mx-auto pb-[80px]",children:[e.jsx(N,{title:s("title.Drinks")}),e.jsx(U,{}),e.jsx($,{})]})})};export{X as default};
