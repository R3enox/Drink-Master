import{d as j,b as k,r as d,f as D,j as e,s as f,a as P,u as h,h as y}from"./index-95b55ecc.js";import{P as w}from"./PageTitle-2dbfa7a7.js";import{c as v,a as N,S as u}from"./createCollectionOptions-3f622606.js";import{s as S,b as F,a as C,D as O}from"./drinksSelector-fdaa4378.js";import{u as A,P as E,D as I}from"./DrinkImageComponent-c077d6dc.js";import{D as L}from"./paginationLimits-a54512ff.js";import{s as T}from"./scrollToTop-9bd6e429.js";import"./emotion-memoize.esm-f5713a00.js";import"./floating-ui.dom-93188c57.js";const b=()=>{const[r,t]=j(),o=r.get("search")??"",i=r.get("category")??"",c=r.get("ingredient")??"";return{search:o,category:i,ingredient:c,setDrinkFilter:(n,p)=>{p===""?r.delete(n):r.set(n,p),r.set("page",1),t(r)},resetDrinkFilters:()=>{t({search:"",category:"",ingredient:""})}}},M=()=>{const{categories:r,ingredients:t}=k(),{search:o,category:i,ingredient:c,setDrinkFilter:a}=b(),l=d.useMemo(()=>v(r??[]),[r]),n=d.useMemo(()=>N(t??[]),[t]),{handleSubmit:p,setValue:m,watch:x}=D({defaultValues:{search:o||""}}),g=s=>{a("search",s.search)};return e.jsxs("div",{className:"flex flex-col items-center md:flex-row gap-[14px] md:gap-[8px] mt-[40px] md:mt-[60px] lg:mt-[80px]",children:[e.jsxs("form",{onSubmit:p(g),className:"flex flex-row w-full justify-between items-center md:w-[264px] hover:border-grey-text-color hover:color-transparent bg-transparent h-[54px] rounded-[200px] border-[1px] border-border-color  placeholder-border-color py-[18px] md:py-[14px] px-[24px]",children:[e.jsx("input",{className:"bg-transparent w-full outline-none text-[14px] md:text-[17px] leading-[1.29] md:leading-[1.56]",type:"text",placeholder:"Enter the text",onChange:s=>{m("search",s.target.value)},value:x("search")}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"reset",onClick:()=>{m("search",""),a("search","")},className:"w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:x("search")&&e.jsx("svg",{className:" stroke-primary-text-color w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:e.jsx("use",{href:f+"#icon-cross"})})}),e.jsx("button",{type:"submit",children:e.jsx("svg",{className:"stroke-primary-text-color ml-[10px] sm:w-[22px] h-[22px] md:w-[28px] md:h-[28px]",children:e.jsx("use",{href:f+"#icon-search"})})})]})]}),e.jsx(u,{options:l,placeholder:"All categories",classNamePrefix:"searchSelect",isClearable:i&&!0,onChange:s=>a("category",(s==null?void 0:s.value)||""),defaultValue:{value:i||"",label:i||"All categories"}}),e.jsx(u,{options:n,placeholder:"Ingredients",classNamePrefix:"searchSelect",isClearable:c&&!0,onChange:s=>a("ingredient",(s==null?void 0:s.value)||""),defaultValue:{value:c||"",label:c||"Ingredients"}})]})},R=()=>{const r=P(),{page:t,per_page:o,countPagesOfPagination:i,setPage:c}=A(L),{search:a,category:l,ingredient:n}=b(),p=h(S),m=h(F),x=h(C);d.useEffect(()=>{const s=new URLSearchParams({page:t,per_page:o});a&&s.set("search",a),l&&s.set("category",l),n&&s.set("ingredient",n),r(y(s))},[t,o,a,l,n,r]);const g=!x&&m===0;return e.jsxs("div",{className:"mt-[40px]",children:[m>0&&e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex flex-wrap flex-col md:flex-row gap-[28px] md:gap-x-[20px] md:gap-y-[40px] lg:gap-y-[80px]",children:p.map(s=>e.jsx(O,{drink:s},s._id))}),e.jsx(E,{totalCount:m,itemsPerPage:o,setPage:c,forcePage:t,initialPage:t,countPagesOfPagination:i})]}),g&&e.jsx(I,{description:"We did not find any drinks for you"}),e.jsx("br",{})]})},J=()=>(d.useEffect(()=>{T()},[]),e.jsx("div",{className:`bg-common-set
    md:bg-common-set-tablet lg:bg-common-set-desktop bg-contain bg-no-repeat`,children:e.jsxs("div",{className:"container mx-auto pb-[80px]",children:[e.jsx(w,{title:"Drinks"}),e.jsx(M,{}),e.jsx(R,{})]})}));export{J as default};
