import{c as j,a as b,r as d,d as y,j as e,s as g,f as k}from"./index-1a609c2a.js";import{P}from"./PageTitle-0f5fbd63.js";import{c as D,a as w,S as h}from"./createCollectionOptions-68f4fa33.js";import{D as v}from"./DrinkCardPreview-6c7e5095.js";import{u as N,P as F}from"./usePagination-a61f6913.js";import{D as C}from"./paginationLimits-aa4d1835.js";import{D as S}from"./DrinkImageComponent-1d780a98.js";import{s as O}from"./scrollToTop-9bd6e429.js";import"./emotion-memoize.esm-f5713a00.js";import"./floating-ui.dom-93188c57.js";const u=()=>{const[r,a]=j(),l=r.get("search")??"",o=r.get("category")??"",n=r.get("ingredient")??"";return{search:l,category:o,ingredient:n,setDrinkFilter:(s,c)=>{c===""?r.delete(s):r.set(s,c),r.set("page",1),a(r)},resetDrinkFilters:()=>{a({search:"",category:"",ingredient:""})}}},A=()=>{const{categories:r,ingredients:a}=b(),{search:l,category:o,ingredient:n,setDrinkFilter:i}=u(),m=d.useMemo(()=>D(r??[]),[r]),s=d.useMemo(()=>w(a??[]),[a]),{handleSubmit:c,setValue:x,watch:p}=y({defaultValues:{search:l||""}}),f=t=>{i("search",t.search)};return e.jsxs("div",{className:"flex flex-col items-center md:flex-row gap-[14px] md:gap-[8px] mt-[40px] md:mt-[60px] lg:mt-[80px]",children:[e.jsxs("form",{onSubmit:c(f),className:"flex flex-row w-full justify-between items-center md:w-[264px] hover:border-grey-text-color hover:color-transparent bg-transparent h-[54px] rounded-[200px] border-[1px] border-border-color  placeholder-border-color py-[18px] md:py-[14px] px-[24px]",children:[e.jsx("input",{className:"bg-transparent w-full outline-none text-[14px] md:text-[17px] leading-[1.29] md:leading-[1.56]",type:"text",placeholder:"Enter the text",onChange:t=>{x("search",t.target.value)},value:p("search")}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"reset",onClick:()=>{x("search",""),i("search","")},className:"w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:p("search")&&e.jsx("svg",{className:" stroke-primary-text-color w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:e.jsx("use",{href:g+"#icon-cross"})})}),e.jsx("button",{type:"submit",children:e.jsx("svg",{className:"stroke-primary-text-color ml-[10px] sm:w-[22px] h-[22px] md:w-[28px] md:h-[28px]",children:e.jsx("use",{href:g+"#icon-search"})})})]})]}),e.jsx(h,{options:m,placeholder:"All categories",classNamePrefix:"searchSelect",isClearable:o&&!0,onChange:t=>i("category",(t==null?void 0:t.value)||""),defaultValue:{value:o||"",label:o||"All categories"}}),e.jsx(h,{options:s,placeholder:"Ingredients",classNamePrefix:"searchSelect",isClearable:n&&!0,onChange:t=>i("ingredient",(t==null?void 0:t.value)||""),defaultValue:{value:n||"",label:n||"Ingredients"}})]})},E=()=>{const{page:r,per_page:a,countPagesOfPagination:l,setPage:o}=N(C),{search:n,category:i,ingredient:m}=u(),{data:s,isLoading:c}=k({page:r,per_page:a,search:n,category:i,ingredient:m}),x=!c&&s.totalCount===0;return e.jsxs("div",{className:"mt-[40px]",children:[(s==null?void 0:s.totalCount)>0&&e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex flex-wrap flex-col md:flex-row gap-[28px] md:gap-x-[20px] md:gap-y-[40px] lg:gap-y-[80px]",children:s.paginatedResult.map(p=>e.jsx(v,{drink:p},p._id))}),e.jsx(F,{totalCount:s==null?void 0:s.totalCount,itemsPerPage:a,setPage:o,forcePage:r,initialPage:r,countPagesOfPagination:l})]}),x&&e.jsx(S,{description:"We did not find any drinks for you"}),e.jsx("br",{})]})},z=()=>(d.useEffect(()=>{O()},[]),e.jsx("div",{className:`bg-common-set
    md:bg-common-set-tablet lg:bg-common-set-desktop bg-contain bg-no-repeat`,children:e.jsxs("div",{className:"container mx-auto pb-[80px]",children:[e.jsx(P,{title:"Drinks"}),e.jsx(A,{}),e.jsx(E,{})]})}));export{z as default};
