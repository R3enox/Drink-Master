import{d as v,u as b,c as N,r as h,e as w,j as e,s as j,b as C,a as k,f as F}from"./index-a30e71ce.js";import{P as O}from"./PageTitle-41477778.js";import{c as I,a as T,S as D}from"./createCollectionOptions-9e89f26c.js";import{s as L,b as $,a as E,D as A}from"./drinksSelector-4f17f7a0.js";import{u as M,P as R,D as _}from"./DrinkImageComponent-f387f554.js";import{D as B}from"./paginationLimits-a54512ff.js";import{s as U,S as q}from"./ScrollBtn-f050b5fb.js";import"./floating-ui.dom-97632d49.js";const P=()=>{const[r,i]=v(),t=r.get("search")??"",c=r.get("category")??"",m=r.get("ingredient")??"";return{search:t,category:c,ingredient:m,setDrinkFilter:(s,o)=>{o===""?r.delete(s):r.set(s,o),r.set("page",1),i(r)},resetDrinkFilters:()=>{i({search:"",category:"",ingredient:""})}}},z=()=>{const{t:r,i18n:i}=b(),{categories:t,ingredients:c}=N(),{search:m,category:p,ingredient:n,setDrinkFilter:s}=P(),o=i.language,u=h.useMemo(()=>I(t??[],r,"categories"),[t,r]),x=h.useMemo(()=>T(c??[],r,"ingredients"),[c,r]),{handleSubmit:f,setValue:g,watch:l}=w({defaultValues:{search:m||""}}),d=a=>{s("search",a.search)},S=p&&r(`categories.${p}`)||r("inputPlaceholder.DrinksSearch.SelectCategory"),y=n&&r(`ingredients.${n}`)||r("inputPlaceholder.DrinksSearch.SelectIngredients");return e.jsxs("div",{className:"flex flex-col items-stretch md:items-center md:flex-row gap-[14px] md:gap-[8px] mt-[40px] md:mt-[60px] lg:mt-[80px]",children:[e.jsx("div",{className:"searchName","data-title":r("inputPlaceholder.DrinksSearch.itemPromt"),children:e.jsxs("form",{onSubmit:f(d),className:"flex flex-row justify-between items-center border-border-color-search dark:border-border-color hover:border-hover-border-color-search dark:hover:border-grey-text-color hover:color-transparent bg-transparent rounded-[200px] border-[1px] py-[18px] md:py-[14px] px-[24px]",children:[e.jsx("input",{className:"bg-transparent w-full outline-none text-[14px] md:text-[17px] leading-[1.29] md:leading-[1.56]  placeholder:text-dark-theme-bg-color dark:placeholder:text-primary-text-color",type:"text",placeholder:r("inputPlaceholder.DrinksSearch.itemTitle"),onChange:a=>{g("search",a.target.value)},value:l("search")}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"reset",onClick:()=>{g("search",""),s("search","")},className:"w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:l("search")&&e.jsx("svg",{className:"stroke-primary-text-button-color fill-none dark:stroke-primary-text-color w-[10px] h-[10px] md:w-[15px] md:h-[15px]",children:e.jsx("use",{href:j+"#icon-cross"})})}),e.jsx("button",{type:"submit",children:e.jsx("svg",{className:"stroke-primary-text-button-color fill-none dark:stroke-primary-text-color ml-[10px] w-[22px] h-[22px] md:w-[28px] md:h-[28px]",children:e.jsx("use",{href:j+"#icon-search"})})})]})]})}),e.jsx(D,{options:u,placeholder:r("inputPlaceholder.DrinksSearch.SelectCategory"),classNamePrefix:"searchSelect",isClearable:p&&!0,onChange:a=>s("category",(a==null?void 0:a.value)||""),defaultValue:{value:p||"",label:S}},`${o}cat`),e.jsx(D,{options:x,placeholder:r("inputPlaceholder.DrinksSearch.SelectIngredients"),classNamePrefix:"searchSelect",isClearable:n&&!0,onChange:a=>s("ingredient",(a==null?void 0:a.value)||""),defaultValue:{value:n||"",label:y}},`${o}ing`)]})},G=()=>{const{t:r}=b(),i=C(),{page:t,per_page:c,countPagesOfPagination:m,setPage:p}=M(B),{search:n,category:s,ingredient:o}=P(),u=k(L),x=k($),f=k(E);h.useEffect(()=>{let l=t;(isNaN(parseInt(t))||t<=0)&&(l=1);const d=new URLSearchParams({page:l,per_page:c});n&&d.set("search",n),s&&d.set("category",s),o&&d.set("ingredient",o),i(F(d))},[t,c,n,s,o,i]);const g=!f&&x===0;return e.jsxs("div",{className:"mt-[40px]",children:[x>0&&e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"flex flex-wrap flex-col md:flex-row gap-[28px] md:gap-x-[20px] md:gap-y-[40px] lg:gap-y-[80px]",children:u.map(l=>e.jsx(A,{drink:l},l._id))}),e.jsx(R,{totalCount:x,itemsPerPage:c,setPage:p,forcePage:t,initialPage:t,countPagesOfPagination:m})]}),g&&e.jsx(_,{description:r("DrinkImageComponent.Drinks")}),e.jsx("br",{})]})},V=()=>{const{t:r,i18n:i}=b();return h.useEffect(()=>{U()},[]),e.jsx("div",{className:` dark:bg-common-set
    md:dark:bg-common-set-tablet lg:dark:bg-common-set-desktop bg-contain bg-no-repeat`,children:e.jsxs("div",{className:"container mx-auto pb-[80px]",children:[e.jsx(O,{title:r("title.Drinks")}),e.jsx(z,{}),e.jsx(G,{}),e.jsx(q,{})]})})};export{V as default};
